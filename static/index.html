<html>
    <script>
function doit() {
    const eventSource = new EventSource('/chunk');

    eventSource.onmessage = function(event) {
    const text = event.data;

    const canvas = document.getElementById("canvas");
      const ctx = canvas.getContext("2d");
      const myArray = text.split(" ");
      console.log(myArray[0])
      if (myArray[0] == "line"){
          console.log("LINE")
// Start a new Path
        ctx.beginPath();
        ctx.moveTo(myArray[1], myArray[2]);
        ctx.lineTo(myArray[3], myArray[4]);
        // Draw the Path
        ctx.stroke();
      } else {
          console.log(myArray)
      }
  }
    eventSource.onerror = (err) => {
        console.error("EventSource failed:", err);
    };
}

doit()
function send(){
    fetch('/send', {method:"POST", headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ data: document.getElementById("cmd").value }) })
}
    </script>
    <body>
        <canvas id="canvas" width="500px" height="500px"></canvas>
    CMD: <input id="cmd" />
    <input type="submit" onclick="send();">
        </body>
</html>
